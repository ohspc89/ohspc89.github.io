<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> ELAN Behavioral Coding QC Pipeline | Jinseok Oh </title> <meta name="author" content="Jinseok Oh"> <meta name="description" content="Diff-based weekly QC with per-coder issue dumps for non-technical users"> <meta name="keywords" content="data-engineering, research-data-engineering, ETL, quality-control, pipelines, python, R, SQL, docker, wearable-sensors, time-series"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/android-chrome-192x192.png?7189cde97ff0c511bec47611a5ebe15e"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ohspc89.github.io/projects/2_project/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Jinseok Oh </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">ELAN Behavioral Coding QC Pipeline</h1> <p class="post-description">Diff-based weekly QC with per-coder issue dumps for non-technical users</p> </header> <article> <h2 id="overview">Overview</h2> <p>In our lab, we annotate infants’ reaches to a toy with the goal of analyzing the temporal structure of the behavior. Annotation is done using a software named ELAN (archive.mpi.nl/tla/elan). There are more than 500 videos to annotate, so different coders with varying levels of experience work on the task. It is crucial that the quality of annotation is maintained for future analysis. The quality control (QC) for annotation files is performed on a weekly basis.</p> <p>Each annotation file has six columns:</p> <ul> <li>Tier (= Body part whose movements were annotated)</li> <li>ID of the video annotated</li> <li>(Reach) Onset</li> <li>(Reach) Offset</li> <li>Duration (= Offset - Onset)</li> <li>Movement Category Label</li> </ul> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/ELAN_output-480.webp 480w,/assets/img/ELAN_output-800.webp 800w,/assets/img/ELAN_output-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/ELAN_output.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="annotated file" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> An example annotation of a video. </div> <h3 id="error-categories">Error Categories</h3> <ul> <li>offset (The last offset should be the same for all tiers)</li> <li>label (Labels should be one of the pre-defined labels)</li> <li>continuous (The offset of a previous event should be the same as the onset of the next event)</li> </ul> <p>A naive approach re-checks <strong>every file every week</strong>, which is slow and redundant when most files were already verified the week before.</p> <p>I built an <strong>automated QC pipeline</strong> that supports both:</p> <ul> <li> <strong>Weekly incremental QC</strong> (only checks <em>new or changed</em> assignments)</li> <li> <strong>Monthly full QC</strong> (runs a complete audit)</li> </ul> <p>The system is designed to be usable by <strong>non-technical users</strong> via a <strong>one-click Windows <code class="language-plaintext highlighter-rouge">.bat</code></strong> workflow.</p> <hr> <h2 id="problem">Problem</h2> <p>Weekly QC had three recurring pain points:</p> <ol> <li> <strong>Unclear action items</strong>: QC outputs were not easily attributable to individual coders</li> <li> <strong>Operational friction</strong>: QC required running scripts manually and interpreting logs.</li> </ol> <hr> <h2 id="solution">Solution</h2> <h3 id="1-cloud-synced-assignment-management-microsoft-onedrive">1) Cloud-synced assignment management (Microsoft OneDrive)</h3> <p>QC targets are defined in a shared assignment spreadsheet stored on <strong>Microsoft OneDrive</strong>.</p> <p>The pipeline reads directly from a cloud-synced directory structure, allowing:</p> <ul> <li>Centralized file access across multiple lab machines</li> <li>Version-controlled assignment updates via OneDrive sync history</li> <li>Seamless collaboration without manual file transfers</li> <li>Consistent path resolution across users’ environments</li> </ul> <p>To ensure reproducibility, the pipeline normalizes the spreadsheet into a standardized <code class="language-plaintext highlighter-rouge">reference.tsv</code>, which serves as the canonical input for downstream QC logic.</p> <p>This design allows the QC workflow to operate reliably in a <strong>cloud-backed research environment</strong> while remaining executable via local scripts.</p> <h3 id="2-incremental-qc-via-snapshot-diff">2) Incremental QC via snapshot diff</h3> <p>To avoid re-checking everything, the pipeline maintains a lightweight state:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">reference_prev.tsv</code> - snapshot from the previous run</li> <li> <code class="language-plaintext highlighter-rouge">reference_new.tsv</code> - rows newly added since the previous run (diff)</li> </ul> <p>Weekly QC consumes <code class="language-plaintext highlighter-rouge">reference_new.tsv</code> when available, falling back to full QC when needed.</p> <h3 id="3-per-coder-issue-dumps-actionable-outputs">3) Per-coder “issue dumps” (actionable outputs)</h3> <p>Instead of only providing summary based on annotation error categories, the pipeline also produces <strong>per-coder files</strong>. Reviewer can easily notify each coder of their errors, without examining line-by-line to associate errors with coders.</p> <p>Each QC run writes outputs into a <strong>timestamped folder</strong> (e.g., <code class="language-plaintext highlighter-rouge">qc_by_coder_YYYY-MM-DD_HH:MM</code>) so results are traceable and never overwritten.</p> <h3 id="4-one-click-execution-for-non-technical-users">4) One-click execution for non-technical users</h3> <p>QC is run via a Windows batch script:</p> <ul> <li> <strong>Weekly</strong>: incremental by default</li> <li> <strong>Monthly</strong>: full QC trigger (e.g., first Monday logic)</li> </ul> <p>This design minimizes training burden: “double-click and wait for Done.”</p> <hr> <h2 id="results--impact">Results / Impact</h2> <ul> <li> <strong>Reduced runtime</strong> by avoiding full re-scans in weekly cycles</li> <li> <strong>Improved usability</strong>: coders receive exact rows they need to fix</li> <li> <strong>More robust operations</strong>: timestamped outputs + consistent reference state</li> <li> <strong>Less human error</strong>: standardized execution path via <code class="language-plaintext highlighter-rouge">.bat</code> </li> </ul> <hr> <h2 id="tech-stack">Tech Stack</h2> <ul> <li> <strong>R</strong> (tidyverse, fs, stringr) for QC logic and reporting</li> <li> <strong>Microsoft OneDrive (cloud-synced storage)</strong> for collaborative file management</li> <li> <strong>Windows Batch</strong> for one-click automation</li> <li> <strong>Tabular reference ingestion</strong> from a shared spreadsheet source</li> <li> <strong>File-based state</strong> to enable incremental processing</li> </ul> <hr> <h2 id="what-id-improve-next-production-minded-roadmap">What I’d Improve Next (Production-minded roadmap)</h2> <ul> <li>Add unit tests for key QC rules and edge cases</li> <li>Add run metadata (QC version, input snapshot hash, summary JSON)</li> <li>Optional email/slack notification with links to the output folder</li> <li>Containerized execution for cross-machine reproducibility</li> </ul> <hr> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2026 Jinseok Oh. Built with Jekyll and al-folio. Hosted on GitHub Pages. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>